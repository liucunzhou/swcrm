(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-customer-today"],{"012a":function(t,e,a){var i=a("09b4");"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var n=a("4f06").default;n("3e344932",i,!0,{sourceMap:!1,shadowMode:!1})},"09b4":function(t,e,a){e=t.exports=a("2350")(!1),e.push([t.i,".pages[data-v-4d8abc10]{width:100%;\r\n\t/* height: 100%; */padding:90px 12px 30px 12px;-webkit-box-sizing:border-box;box-sizing:border-box;overflow:auto;position:relative;background:#0caaf0}.header_box[data-v-4d8abc10]{position:fixed;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;left:0;top:0;width:100%;height:42px;padding:10px 0 0 0;z-index:10;background:#fff;color:#00000;-webkit-box-sizing:border-box;box-sizing:border-box}.header_back[data-v-4d8abc10]{-webkit-box-flex:0;-webkit-flex:0 %?38?%;-ms-flex:0 %?38?%;flex:0 %?38?%;padding-left:%?16?%}.header_back img[data-v-4d8abc10]{width:100%;height:auto;vertical-align:middle;-webkit-transform:rotate(180deg);-ms-transform:rotate(180deg);transform:rotate(180deg)}.header_all[data-v-4d8abc10]{-webkit-box-flex:1;-webkit-flex:1;-ms-flex:1;flex:1;height:30px;text-align:center}.header_allimg[data-v-4d8abc10]{margin-left:10px;width:15px;height:auto;-webkit-transform:rotate(270deg);-ms-transform:rotate(270deg);transform:rotate(270deg);vertical-align:middle}.header_allimgs[data-v-4d8abc10]{margin-left:10px;width:15px;height:auto;-webkit-transform:rotate(90deg);-ms-transform:rotate(90deg);transform:rotate(90deg);vertical-align:middle}.header_search[data-v-4d8abc10]{-webkit-box-flex:0;-webkit-flex:0 2rem;-ms-flex:0 2rem;flex:0 2rem;padding:0 %?16?%}.allcusList[data-v-4d8abc10]{width:100%;height:100vh;background:rgba(0,0,0,.2);position:fixed;top:40px;left:0;z-index:10}.allcusList_box[data-v-4d8abc10]{width:100%;height:auto;background:#fff}.allcusList_main[data-v-4d8abc10]{padding:0 30px;-webkit-box-sizing:border-box;box-sizing:border-box;width:100%;height:auto;line-height:35px;border-bottom:1px solid #f2f2f2;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between}.allcusList_main[data-v-4d8abc10]:last-child{border:none}.activeallcusList_main[data-v-4d8abc10]{color:#0caaf0}.topmuie[data-v-4d8abc10]{background:#fff;width:100%;height:80px;padding-top:40px;-webkit-box-sizing:border-box;box-sizing:border-box;position:fixed;top:0;left:0;border-bottom:1px solid #f4f4f4;z-index:4}\r\n\r\n/* 筛选弹框 */.topmuieFixed[data-v-4d8abc10]{width:100%;height:100vh;background:rgba(0,0,0,.3);position:fixed;top:80px;left:0;z-index:4}.topmuieFixed_main[data-v-4d8abc10]{width:100%;height:100%;background:#fff}.topmuieFixed_box[data-v-4d8abc10]{width:100%;height:100%;clear:both;overflow:hidden}.searchNavBar[data-v-4d8abc10]{width:50%;height:100%;overflow:scroll;float:left;background:#f8f8f8;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-box-align:left;-webkit-align-items:left;-ms-flex-align:left;align-items:left;-webkit-box-sizing:border-box;box-sizing:border-box}.searchNavBar uni-text[data-v-4d8abc10]{line-height:40px;padding-left:10px}.searchNavSelected[data-v-4d8abc10]{line-height:30px;background:#fff;color:#0caaf0}.topmuieFixed_right[data-v-4d8abc10]{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;float:right;width:50%;height:100%;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-box-align:left;-webkit-align-items:left;-ms-flex-align:left;align-items:left;overflow:scroll;-webkit-box-sizing:border-box;box-sizing:border-box;padding-left:12px}.topmuieFixed_right uni-text[data-v-4d8abc10]{line-height:30px;font-size:15px}.searchItemSelected[data-v-4d8abc10]{color:#0caaf0}.clocedtime[data-v-4d8abc10]{width:100%;height:auto;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between}.topmuieFixed_setting[data-v-4d8abc10]{position:fixed;bottom:0;width:100%;height:40px;background:#fff;border-top:1px #f2f2ff2 solid;font-size:16px;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:space-evenly;-webkit-justify-content:space-evenly;-ms-flex-pack:space-evenly;justify-content:space-evenly;line-height:40px;-webkit-box-sizing:border-box;box-sizing:border-box}.topmuieFixed_setting uni-text[data-v-4d8abc10]{width:50%;display:inline-block;text-align:center}.topmuieFixed_setting uni-text[data-v-4d8abc10]:first-child{border-right:1px solid #f2f2f2}.topmuieFixed_setting uni-text[data-v-4d8abc10]:nth-child(2){border-right:1px solid #f2f2f2}.screen[data-v-4d8abc10]{width:50%;height:40px;display:inline-block;text-align:center;line-height:45px;text-align:center;float:left}.screen_allimg[data-v-4d8abc10]{margin-left:10px;width:15px;height:auto;-webkit-transform:rotate(90deg);-ms-transform:rotate(90deg);transform:rotate(90deg);vertical-align:middle}.screen_allimgs[data-v-4d8abc10]{margin-left:10px;width:15px;height:auto;-webkit-transform:rotate(270deg);-ms-transform:rotate(270deg);transform:rotate(270deg);vertical-align:middle}.seek[data-v-4d8abc10]{float:right;text-align:center;width:100%;height:40px;line-height:45px;text-align:center;display:inline-block;-webkit-box-sizing:border-box;box-sizing:border-box;border-top:3px solid #0caaf0}.seek img[data-v-4d8abc10]{padding-right:12px;width:38px;height:38px;display:inline-block;vertical-align:top;text-align:right;float:right}.seek uni-input[data-v-4d8abc10]{height:40px;width:80%;float:left;text-align:left;padding-left:12px}.msg[data-v-4d8abc10]{width:100%;height:auto;border-radius:5px;background:#fff;padding:0 20px;-webkit-box-sizing:border-box;box-sizing:border-box;-webkit-box-shadow:1px 1px 10px #f4f4f4;box-shadow:1px 1px 10px #f4f4f4;position:relative;margin:10px 0}.msgtopright[data-v-4d8abc10]{position:absolute;top:5px;right:5px;display:inline-block;width:15px;height:15px;text-align:center;line-height:15px;font-size:10px;color:#fff;background:#0caaf0;border-radius:50%}.msg_header[data-v-4d8abc10]{width:100%;padding:15px 0;-webkit-box-sizing:border-box;box-sizing:border-box;border-bottom:solid #f2f2f2 1px;margin-bottom:5px}.msg_text[data-v-4d8abc10]{width:100%;padding:8px 0}.names[data-v-4d8abc10]{color:#1e1e1e;letter-spacing:4px;margin-right:10px}.namemain[data-v-4d8abc10]{color:#989898;letter-spacing:3px}.clocedtime[data-v-4d8abc10]{position:fixed;bottom:40px;width:100%;background:#fff;height:auto;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between}.statuTag[data-v-4d8abc10]{position:absolute;right:%?70?%;top:%?10?%;padding:%?1?% %?8?%;font-size:%?18?%;list-style:%?18?%;border-radius:%?10?%;color:#fff;background:#14aaf0}",""])},"2c02":function(t,e,a){"use strict";var i=a("012a"),n=a.n(i);n.a},3388:function(t,e,a){"use strict";a.r(e);var i=a("c0ae"),n=a.n(i);for(var s in i)"default"!==s&&function(t){a.d(e,t,function(){return i[t]})}(s);e["default"]=n.a},"5bf7":function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",{staticClass:"pages"},[i("v-uni-view",{staticClass:"header_box"},[i("v-uni-view",{staticClass:"header_back",on:{click:function(e){e=t.$handleEvent(e),t.goBack()}}},[i("img",{attrs:{src:a("7b85")},on:{click:function(e){e=t.$handleEvent(e),t.goBack()}}})]),i("v-uni-view",{staticClass:"header_all"},[i("v-uni-text",[t._v("今日跟进")])],1),i("v-uni-view",{staticClass:"header_search",on:{click:function(e){e=t.$handleEvent(e),t.isShowSearchCompontent=!t.isShowSearchCompontent}}},[t._v("筛选")])],1),i("v-uni-view",{staticClass:"page-search"},[t.isShowPageNav?i("v-uni-view",{staticClass:"allcusList",on:{click:function(e){e=t.$handleEvent(e),t.closePageNavFn(e)}}},[i("v-uni-view",{staticClass:"allcusList_box"},t._l(t.pageNav,function(e,a){return i("v-uni-view",{key:a,class:["allcusList_main",t.pageNavIndex==a?"activeallcusList_main":""],on:{click:function(e){e.stopPropagation(),e=t.$handleEvent(e),t.PageNavFn(a)}}},[i("v-uni-text",[t._v(t._s(e))]),t.pageNavIndex==a?i("v-uni-text",[t._v("✓")]):t._e()],1)}),1)],1):t._e(),i("v-uni-view",{staticClass:"topmuie"},[i("v-uni-view",{staticClass:"seek"},[i("v-uni-input",{attrs:{type:"text","placeholder-style":"font-size:13px",value:t.keywords,"data-key":"keywords",placeholder:"请输入手机号进行查询"},on:{input:function(e){e=t.$handleEvent(e),t.inputChange(e)}}}),i("img",{attrs:{src:a("96cb")},on:{click:function(e){e=t.$handleEvent(e),t.search(e)}}})],1)],1),t.isShowSearchCompontent?i("v-uni-view",{staticClass:"topmuieFixed"},[i("v-uni-view",{staticClass:"topmuieFixed_main"},[i("v-uni-view",{staticClass:"topmuieFixed_box"},[i("v-uni-view",{staticClass:"searchNavBar"},t._l(t.searchBar,function(e,a){return i("v-uni-text",{key:a,class:t.searchNavIndex===a?"searchNavSelected":"",on:{click:function(e){e=t.$handleEvent(e),t.searchNav(a)}}},[t._v(t._s(e.title))])}),1),i("v-uni-view",{staticClass:"topmuieFixed_right"},t._l(t.searchBar[t.searchNavIndex]["items"],function(e,a){return i("v-uni-text",{key:a,class:t.searchBar[t.searchNavIndex]["index"]===a?"searchItemSelected":"",on:{click:function(e){e=t.$handleEvent(e),t.searchNavItem(a)}}},[t._v(t._s(e.title?e.title:e.realname))])}),1)],1),t.isShowDateRange?i("v-uni-view",{staticClass:"clocedtime"},[i("v-uni-picker",{attrs:{mode:"date",value:t.startDate},on:{change:function(e){e=t.$handleEvent(e),t.startDateChange(e)}}},[i("v-uni-view",{staticClass:"uni-input"},[i("v-uni-text",[t._v("开始时间:"+t._s(t.startDate))])],1)],1),i("v-uni-picker",{attrs:{mode:"date",value:t.endDate},on:{change:function(e){e=t.$handleEvent(e),t.endDateChange(e)}}},[i("v-uni-view",{staticClass:"uni-input"},[i("v-uni-text",[t._v("结束时间:"+t._s(t.endDate))])],1)],1)],1):t._e(),t._v("--\x3e"),i("v-uni-view",{staticClass:"topmuieFixed_setting"},[i("v-uni-text",{on:{click:function(e){e.stopPropagation(),e=t.$handleEvent(e),t.emptyFn(e)}}},[t._v("清空")]),i("v-uni-text",{on:{click:function(e){e.stopPropagation(),e=t.$handleEvent(e),t.makeSure(e)}}},[t._v("确定")])],1)],1)],1):t._e()],1),t._l(t.customers,function(e,a){return i("v-uni-view",{key:e.id,staticClass:"msg"},[i("v-uni-text",{staticClass:"msgtopright"},[t._v(t._s(a+1))]),i("v-uni-view",{staticClass:"statuTag"},[t._v(t._s(e.active_status))]),i("v-uni-view",{on:{click:function(a){a=t.$handleEvent(a),t.navToCustomer(e.member_id)}}},[i("v-uni-view",{staticClass:"msg_header"},[i("v-uni-view",{staticClass:"header_left"},[i("v-uni-text",{staticClass:"names"},[t._v("姓名：")]),i("v-uni-text",{staticClass:"namemain"},[t._v(t._s(e.realname))])],1)],1),i("v-uni-view",{staticClass:"msg_text"},[i("v-uni-text",{staticClass:"names"},[t._v("预算：")]),i("v-uni-text",{staticClass:"namemain"},[t._v(t._s(e.budget))])],1),i("v-uni-view",{staticClass:"msg_text"},[i("v-uni-text",{staticClass:"names"},[t._v("桌数：")]),i("v-uni-text",{staticClass:"namemain"},[t._v(t._s(e.banquet_size))])],1),i("v-uni-view",{staticClass:"msg_text"},[i("v-uni-text",{staticClass:"names"},[t._v("酒店：")]),i("v-uni-text",{staticClass:"namemain"},[t._v(t._s(e.hotel_text))])],1),i("v-uni-view",{staticClass:"msg_text"},[i("v-uni-text",{staticClass:"names"},[t._v("区域：")]),i("v-uni-text",{staticClass:"namemain"},[t._v(t._s(e.zone))])],1)],1)],1)}),i("uni-load-more",{attrs:{status:t.dstatu}})],2)},n=[];a.d(e,"a",function(){return i}),a.d(e,"b",function(){return n})},c0ae:function(t,e,a){"use strict";var i=a("288e");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,a("ac6a"),a("4917");var n=i(a("5176")),s=i(a("c76c")),o=i(a("0151")),d=o.default.env.platform,r={components:{uniLoadMore:s.default},data:function(){var t=["全部客户","我的客户","我的下属客户"],e=[{title:"跟进状态",field:"status",index:0,match:"statuses",items:[]},{title:"客户来源",field:"source",index:0,match:"sources",items:[]},{title:"员工列表",field:"staff",index:0,match:"staffes",items:[]},{title:"下次回访时间",field:"next_visit_time",index:0,items:[{id:"",title:"不限"},{id:"today",title:"今天"},{id:"date_range",title:"自定义"}]}];return{page_title:"我的客资",params:{},page:0,dstatu:"more",isShowSearchCompontent:!1,searchObj:{},searchBar:e,searchNavIndex:0,searchSelectedItemIndex:0,keywords:"",customers:[],pageNav:t,pageNavIndex:0,isShowPageNav:!1,isShowDateRange:!1,startDate:"",endDate:"",token:null}},onLoad:function(t){this.token=this.$getToken(),this.params=t,void 0!=t.page_title&&(this.page_title=t.page_title,uni.setNavigationBarTitle({title:t.page_title})),this.getCustomerList()},created:function(){this.getBaseData()},onShow:function(){"notInDingTalk"!=d&&o.default.ready(function(){o.default.biz.navigation.hideBar({hidden:!0,onSuccess:function(t){},onFail:function(t){}})})},onReachBottom:function(){this.getCustomerList(this)},methods:{getCustomerList:function(t){this.dstatu="loading";var e=this,a=e.$apis.customer.today;console.log(this.token);var i={};i["page"]=e.page,this.keywords?(i={},i["keywords"]=this.keywords):i=(0,n.default)(e.params,i,e.searchObj),i["token"]=e.token,uni.request({url:a,method:"POST",data:i,dataType:"json",header:{"content-type":"application/x-www-form-urlencoded"},success:function(t){console.log(1);var a=t.data;"0"==a.code?(a.data.length>0?(e.customers=e.customers.concat(a.data),e.dstatu="more"):e.dstatu="noMore",e.customers.length>=a.count&&(e.dstatu="noMore")):uni.showToast({title:a.msg}),e.page=e.page+1}})},navToCustomer:function(t){uni.navigateTo({url:"../visit/details?member_id=".concat(t)})},getBaseData:function(){var t=this,e=t.$apis.customer.getBaseData,a=this.$getToken(),i={token:a};uni.request({url:e,method:"POST",data:i,dataType:"json",header:{"content-type":"application/x-www-form-urlencoded"},success:function(e){var a=e.data;if("0"==a.code)for(var i in console.log(t.searchBar),t.searchBar){var n=t.searchBar[i];if(void 0!=n["match"]){var s=n["match"];t.searchBar[i]["items"]=a.data[s]}}else uni.showToast({title:a.msg})}})},goBack:function(){uni.navigateBack({delta:0})},PageNavFn:function(t){this.pageNavIndex=t},showPageNavFn:function(){this.isShowPageNav=!this.isShowPageNav},closePageNavFn:function(){this.isShowPageNav=!this.isShowPageNav},searchNav:function(t){this.searchNavIndex=t},searchNavItem:function(t){var e=this.searchNavIndex;console.log("searchNavIndex is:",e),this.searchBar[e]["index"]=t,"date_range"==this.searchBar[e]["items"][t]["id"]?this.isShowDateRange=!0:this.isShowDateRange=!1},startDateChange:function(t){this.startDate=t.detail.value},endDateChange:function(t){this.endDate=t.detail.value},emptyFn:function(){var t=this;this.searchBar.forEach(function(e,a){console.log(this),t.searchBar[a]["index"]=0}),t.isShowDateRange=!1},makeSure:function(){var t=this,e={};this.searchBar.forEach(function(a,i){if("create_time"==a.field){var n=a.field,s=a.index,o=a.items[s]["id"];"date_range"==o&&(o=t.startDate+"~"+t.endDate),e[n]=o}else{var d=a.field,r=a.index,c=a.items[r]["id"];e[d]=c}}),this.page=0,this.customers=[],this.searchObj=e,this.isShowSearchCompontent=0,this.getCustomerList()},inputChange:function(t){var e=t.currentTarget.dataset.key;this[e]=t.detail.value},search:function(){this.page=1,this.customers=[];var t=this,e=(t.$apis.customer.mine,{});if(e["token"]=this.$getToken(),""==this.keywords)return uni.showToast({title:"请填写要搜索的手机号"}),!1;this.getCustomerList()}}};e.default=r},dc5d:function(t,e,a){"use strict";a.r(e);var i=a("5bf7"),n=a("3388");for(var s in n)"default"!==s&&function(t){a.d(e,t,function(){return n[t]})}(s);a("2c02");var o=a("2877"),d=Object(o["a"])(n["default"],i["a"],i["b"],!1,null,"4d8abc10",null);e["default"]=d.exports}}]);